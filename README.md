# Сервіс сповіщень про підписки

## Огляд
Цей сервіс призначений для моніторингу заданих URL-адрес та сповіщення підписаних користувачів електронною поштою при появі актуальних оновлень. Використовується SQLite як легкий та ефективний рушій бази даних, що забезпечує просте розгортання та мінімальне споживання ресурсів. 

## Структура бази даних
Щоб зберігати цілісність даних та підтримувати зв’язки many-to-many, сервіс використовує три ключові таблиці:

- **urls**: Зберігає URL-адреси, які моніторяться.
- **emails**: Зберігає email-адреси користувачів, що підписалися на оновлення.
- **email_url**: Реалізує зв’язок між email та URL, дозволяючи ефективно відстежувати підписки.

Ця структура полегшує майбутнє впровадження перевірки email та покращення налаштувань підписки.

## Робочий процес сервісу
1. **Обробка підписок**: Коли користувач підписується на URL, сервіс зберігає цю інформацію в базі даних.
2. **Отримання даних у реальному часі**: Після отримання підписки сервіс одразу звертається до OLX для перевірки та збереження відповідних даних. Це забезпечує актуальність інформації, але може дещо збільшити час відповіді клієнту.
3. **Періодичний моніторинг**: Кожні 5 хвилин сервіс перевіряє всі активні URL (ті, що мають хоча б одного підписника) та шукає оновлення.
4. **Надсилання сповіщень**: Якщо виявлено зміни, користувачі, підписані на відповідний URL, отримують email-сповіщення.

## Технологічний стек
- **База даних**: SQLite – обрана за її простоту, ефективність та відповідність до вимог сервісу з низькою частотою запису.
- **Мова програмування**: PHP – серверна частина реалізована на PHP для швидкої та ефективної обробки запитів.
- **Docker**: Сервіс розгортається у Docker-контейнері для зручного управління та масштабованості.
- **Розклад завдань**: Використовується cron у контейнері для виконання перевірки URL кожні 5 хвилин.


## Інструкція з розгортання
1. Клонуйте репозиторій:
   ```sh
   git clone https://github.com/your-repo/subscription-service.git
   cd subscription-service
   ```
2. Запустіть Docker-контейнер:
   ```sh
   docker-compose up -d
   ```
3. Ініціалізуйте базу даних:
   ```sh
   docker exec -it subscription-service php setup_database.php
   ```
4. Запустіть сервіс вручну (якщо потрібно):
   ```sh
   docker exec -it subscription-service php main.php
   ```

## Ліцензія
Цей проєкт ліцензовано за умовами MIT License.

## Внески в проєкт
Якщо у вас є пропозиції або покращення, відкривайте issue або надсилайте pull request!

